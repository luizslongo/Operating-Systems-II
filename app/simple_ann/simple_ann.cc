#include <utility/ostream.h>
#include <utility/fann.h>

using namespace EPOS;

OStream cout;

FANN_EPOS::fann_type inputs[][9] = {
    {280742.0,391447.0,587818.0,45887.0,1.2003483e7,1900720.0,60.0,40.0,1.2e9},
    {244015.0,311230.0,529821.0,40411.0,1.0863566e7,1680115.0,60.0,40.0,1.2e9},
    {247883.0,328033.0,532246.0,40330.0,1.0861345e7,1684465.0,60.0,40.0,1.2e9},
    {212742.0,276375.0,463497.0,34340.0,9658561.0,1491796.0,60.0,40.0,1.2e9},
    {107948.0,136753.0,596581.0,21925.0,1.0842602e7,1833850.0,60.0,40.0,1.2e9},
    {29840.0,6521.0,535316.0,8245.0,9624470.0,1708432.0,60.0,40.0,1.2e9},
    {30350.0,2235.0,584039.0,7968.0,1.0810946e7,1924934.0,60.0,40.0,1.2e9},
    {68696.0,175917.0,588989.0,17797.0,1.0851595e7,1839966.0,60.0,40.0,1.2e9},
    {64170.0,236622.0,571939.0,18727.0,1.0854874e7,1842435.0,60.0,40.0,1.2e9},
    {4.0,0.0,623447.0,899.0,1.0818622e7,2002516.0,60.0,40.0,1.2e9},
    {4.0,0.0,621197.0,55.0,1.080672e7,2000835.0,60.0,40.0,1.2e9},
    {4.0,0.0,621197.0,55.0,1.080672e7,2000835.0,60.0,40.0,1.2e9},
    {4.0,2.0,1844366.0,21.0,9158120.0,773334.0,60.0,20.0,1.2e9},
    {4.0,0.0,3602792.0,0.0,1.0808555e7,1465.0,60.0,20.0,1.2e9},
    {8.0,0.0,3604348.0,0.0,1.0812542e7,2166.0,60.0,20.0,1.2e9},
    {4.0,0.0,3604496.0,1.0,1.0813718e7,1455.0,60.0,20.0,1.2e9},
    {159215.0,402140.0,463541.0,33777.0,7234697.0,1232144.0,60.0,40.0,1.2e9},
    {159215.0,402140.0,463541.0,33777.0,7234697.0,1232144.0,60.0,40.0,1.2e9},
    {163343.0,190820.0,362869.0,27090.0,7266443.0,1124395.0,60.0,40.0,1.2e9},
    {207855.0,262840.0,499514.0,35793.0,9656433.0,1533634.0,60.0,40.0,1.2e9},
    {87943.0,80179.0,591844.0,17825.0,1.0850728e7,1916363.0,60.0,40.0,1.2e9},
    {54275.0,97614.0,754483.0,15237.0,1.3258015e7,2369760.0,60.0,40.0,1.2e9},
    {41264.0,26849.0,538334.0,11290.0,9624376.0,1714066.0,60.0,40.0,1.2e9},
    {45588.0,9602.0,607376.0,12834.0,1.0827654e7,1911097.0,60.0,40.0,1.2e9},
    {43040.0,30756.0,599658.0,11896.0,1.0837553e7,1923085.0,60.0,40.0,1.2e9}
};

FANN_EPOS::fann_type outs[][3] = {
    {-1,1,-1},
    {-1,1,-1},
    {-1,1,-1},
    {-1,1,-1},
    {-1,1,-1},
    {1,-1,-1},
    {1,-1,-1},
    {1,-1,-1},
    {1,-1,-1},
    {1,-1,-1},
    {1,-1,-1},
    {1,-1,-1},
    {1,-1,-1},
    {1,-1,-1},
    {1,-1,-1},
    {1,-1,-1},
    {-1,1,-1},
    {-1,1,-1},
    {-1,1,-1},
    {-1,1,-1},
    {1,-1,-1},
    {1,-1,-1},
    {1,-1,-1},
    {1,-1,-1},
    {1,-1,-1}
};

int main()
{
    cout << "Hello world!" << endl;

    struct FANN_EPOS::fann *ann = FANN_EPOS::fann_create_from_config();
    FANN_EPOS::fann_type * out[25];
    for (int i = 0; i < 25; ++i)
    {
        out[i] = FANN_EPOS::fann_run(ann, inputs[i]);
        cout << "out["<< i <<"] = " << out[i][0] <<"," << out[i][1]<<"," << out[i][2]<<endl;
    }
    cout << "========== LEARNING ===========" << endl;
    for (int i = 0; i < 25; ++i)
    {
        FANN_EPOS::fann_set_train_in_out(ann, inputs[i], out[i]);
        FANN_EPOS::fann_learn_last_run(ann, outs[i]);
        //out[i] = FANN_EPOS::fann_run(ann, inputs[i]);
        //cout << "out["<< i <<"] = " << out[i][0] <<"," << out[i][1]<<"," << out[i][2]<<endl;
    }

    for (int i = 0; i < 25; ++i)
    {
        out[i] = FANN_EPOS::fann_run(ann, inputs[i]);
        cout << "out["<< i <<"] = " << out[i][0] <<"," << out[i][1]<<"," << out[i][2]<<endl;
    }

    return 0;
}
